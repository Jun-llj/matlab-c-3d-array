# 发现问题

MATLAB与C语言在三维数组方面储存的方式不同，在matlab中，三维数组的各维度为(行， 列，深 )，而在C语言中则是(深， 行， 列)，导致矩阵在二者之间的传递会出现问题，矩阵元素被打乱，搜遍全网都没有人发出相关解决代码，所以自己写了一个demo。

# 使用方法

1. matlab命令行执行
    
    ```matlab
    mex matrix_3d_demo.c
    ```
    
2. c程序编译成功后，matlab命令行执行
    
    ```matlab
    matrix_3d_demo
    ```
    
3. matlab命令行显示：
    
    ```matlab
    d在matlab中的输出为:
    
    (:,:,1) =
    
         0     1     2     3
         4     5     6     7
         8     9    10    11
    
    (:,:,2) =
    
        12    13    14    15
        16    17    18    19
        20    21    22    23
    
    rows = 3, cols = 4, pages = 2
    matlab的三维数组d以一维的形式传入c中
    
    当把d的深度看作第 三 维度, 每一页按照c以列储存的下标输出为(错误的形式): 
    d in C：
    depth = 0
    0.000000 depth = 1
    12.000000 
    depth = 0
    1.000000 depth = 1
    13.000000 
    depth = 0
    2.000000 depth = 1
    14.000000 
    depth = 0
    3.000000 depth = 1
    15.000000 
    
    depth = 0
    4.000000 depth = 1
    16.000000 
    depth = 0
    5.000000 depth = 1
    17.000000 
    depth = 0
    6.000000 depth = 1
    18.000000 
    depth = 0
    7.000000 depth = 1
    19.000000 
    
    depth = 0
    8.000000 depth = 1
    20.000000 
    depth = 0
    9.000000 depth = 1
    21.000000 
    depth = 0
    10.000000 depth = 1
    22.000000 
    depth = 0
    11.000000 depth = 1
    23.000000 
    
    当把d的深度看作第 一 维度, 每一页按照c以列储存的下标输出为(正确的形式): 
    d in C：
    depth = 0
    0.000000 1.000000 2.000000 3.000000 
    4.000000 5.000000 6.000000 7.000000 
    8.000000 9.000000 10.000000 11.000000 
    
    depth = 1
    12.000000 13.000000 14.000000 15.000000 
    16.000000 17.000000 18.000000 19.000000 
    20.000000 21.000000 22.000000 23.000000 
    
    -------------在C中创建的矩阵, 在C中输出-------------
    在c中创建指针形式的以一维线性储存的三维数组d_1d:
    d_3d:
    depth = 0
    0.000000 1.000000 2.000000 3.000000 
    4.000000 5.000000 6.000000 7.000000 
    8.000000 9.000000 10.000000 11.000000 
    
    depth = 1
    12.000000 13.000000 14.000000 15.000000 
    16.000000 17.000000 18.000000 19.000000 
    20.000000 21.000000 22.000000 23.000000 
    
    在c中d_1d赋值给三维数组d_3d: 
    d_3d:
    depth = 0
    0.000000 1.000000 2.000000 3.000000 
    4.000000 5.000000 6.000000 7.000000 
    8.000000 9.000000 10.000000 11.000000 
    
    depth = 1
    12.000000 13.000000 14.000000 15.000000 
    16.000000 17.000000 18.000000 19.000000 
    20.000000 21.000000 22.000000 23.000000 
    
    把从matlab中传来的一维形式的三维数组d, 赋值给c中创建的三维数组d_3d: 
    d_3d:
    depth = 0
    0.000000 1.000000 2.000000 3.000000 
    4.000000 5.000000 6.000000 7.000000 
    8.000000 9.000000 10.000000 11.000000 
    
    depth = 1
    12.000000 13.000000 14.000000 15.000000 
    16.000000 17.000000 18.000000 19.000000 
    20.000000 21.000000 22.000000 23.000000 
    
    c中创建的三维数组d_3d赋值给要输出到matlab中的output_dd(一维): 
    output_dd在C中的输出为: 
    depth = 0
    0.000000 1.000000 2.000000 3.000000 
    4.000000 5.000000 6.000000 7.000000 
    8.000000 9.000000 10.000000 11.000000 
    
    depth = 1
    12.000000 13.000000 14.000000 15.000000 
    16.000000 17.000000 18.000000 19.000000 
    20.000000 21.000000 22.000000 23.000000 
    
    output_dd在matlab中的输出为:
    
    (:,:,1) =
    
         0     1     2     3
         4     5     6     7
         8     9    10    11
    
    (:,:,2) =
    
        12    13    14    15
        16    17    18    19
        20    21    22    23
    
    ```
